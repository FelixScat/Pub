<!DOCTYPE html>
<html>

<head>
    
    <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="chrome=1">
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="referrer" content="no-referrer">
<meta name="description" content="A new Hugo site.">
<title>
KVC 键值编码 - Cb7d
</title>




<link rel="shortcut icon" href="https://min.felixplus.top/public/icon/man_icon_square.JPG?X-Amz-Algorithm=AWS4-HMAC-SHA256&amp;X-Amz-Credential=ZYHZHANGYUNHAO931119%2F20200223%2F%2Fs3%2Faws4_request&amp;X-Amz-Date=20200223T024742Z&amp;X-Amz-Expires=432000&amp;X-Amz-SignedHeaders=host&amp;X-Amz-Signature=c5cfbe0ee2c297b46bcf68413178d4f0752d10171e51fe31713b02384b2617e3">








<link rel="stylesheet" href="http://example.org/css/main.min.81bbafc4df93b11c1c3e2449464373c384aa4903731b4fc7a77dfcdd979e184f.css" integrity="sha256-gbuvxN&#43;TsRwcPiRJRkNzw4SqSQNzG0/Hp3383ZeeGE8=" crossorigin="anonymous" media="screen">



 

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Didact+Gothic">

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://example.org/tn.png"/>

<meta name="twitter:title" content="KVC 键值编码"/>
<meta name="twitter:description" content="Key-value coding  Key-value coding is a mechanism enabled by the NSKeyValueCoding informal protocol that objects adopt to provide indirect access to their properties. When an object is key-value coding compliant, its properties are addressable via string parameters through a concise, uniform messaging interface. This indirect access mechanism supplements the direct access afforded by instance variables and their associated accessor methods.
 以上是Apple对KVC的定义，翻译过来就是：
 键值编码是由NSKeyValueCoding非正式协议启用的机制，对象采用该机制提供对其属性的间接访问。 当对象符合键值编码时，其属性可通过字符串参数通过简洁，统一的消息传递接口寻址。 这种间接访问机制补充了实例变量及其相关访问器方法提供的直接访问。
 所有直接或者间接继承NSObject的对象都遵守 NSKeyValueCoding 协议，并默认提供实现，找到 NSKeyValueCoding."/>

<meta property="og:title" content="KVC 键值编码" />
<meta property="og:description" content="Key-value coding  Key-value coding is a mechanism enabled by the NSKeyValueCoding informal protocol that objects adopt to provide indirect access to their properties. When an object is key-value coding compliant, its properties are addressable via string parameters through a concise, uniform messaging interface. This indirect access mechanism supplements the direct access afforded by instance variables and their associated accessor methods.
 以上是Apple对KVC的定义，翻译过来就是：
 键值编码是由NSKeyValueCoding非正式协议启用的机制，对象采用该机制提供对其属性的间接访问。 当对象符合键值编码时，其属性可通过字符串参数通过简洁，统一的消息传递接口寻址。 这种间接访问机制补充了实例变量及其相关访问器方法提供的直接访问。
 所有直接或者间接继承NSObject的对象都遵守 NSKeyValueCoding 协议，并默认提供实现，找到 NSKeyValueCoding." />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://example.org/posts/kvc/" />
<meta property="og:image" content="http://example.org/tn.png"/>
<meta property="article:published_time" content="2020-02-19T10:46:42+08:00" />
<meta property="article:modified_time" content="2020-02-19T10:46:42+08:00" /><meta property="og:site_name" content="Cb7d" />


    

    
    
    
    <title>
        
        KVC 键值编码
        
    </title>
</head>

<body>
    <div class="wrap">
        <div class="section" id="title">KVC 键值编码</div>

        
<div class="section" id="content">
    Wed Feb 19, 2020 &#183; 445 words
    <div class="tag-container">
        
        
        <span class="tag">
            <a href="http://example.org/tags/blog/">
                blog
            </a>
        </span>
        
        
        
        <span class="tag">
            <a href="http://example.org/tags/ios/">
                iOS
            </a>
        </span>
        
        
        
        <span class="tag">
            <a href="http://example.org/tags/objc/">
                ObjC
            </a>
        </span>
        
        
    </div>
    <hr/>
    <h1 id="key-value-coding">Key-value coding</h1>
<blockquote>
<p>Key-value coding is a mechanism enabled by the NSKeyValueCoding informal protocol that objects adopt to provide indirect access to their properties. When an object is key-value coding compliant, its properties are addressable via string parameters through a concise, uniform messaging interface. This indirect access mechanism supplements the direct access afforded by instance variables and their associated accessor methods.</p>
</blockquote>
<p>以上是Apple对KVC的定义，翻译过来就是：</p>
<blockquote>
<p>键值编码是由NSKeyValueCoding非正式协议启用的机制，对象采用该机制提供对其属性的间接访问。 当对象符合键值编码时，其属性可通过字符串参数通过简洁，统一的消息传递接口寻址。 这种间接访问机制补充了实例变量及其相关访问器方法提供的直接访问。</p>
</blockquote>
<p>所有直接或者间接继承NSObject的对象都遵守 <strong>NSKeyValueCoding</strong> 协议，并默认提供实现，找到 <strong>NSKeyValueCoding.h</strong> 我们可以看到里面为这些类添加了一些extension</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec">
<span style="color:#66d9ef">@interface</span> <span style="color:#a6e22e">NSObject</span>(NSKeyValueCoding)

<span style="color:#66d9ef">@interface</span> <span style="color:#a6e22e">NSArray</span><span style="color:#f92672">&lt;</span>ObjectType<span style="color:#f92672">&gt;</span>(NSKeyValueCoding)

<span style="color:#66d9ef">@interface</span> <span style="color:#a6e22e">NSDictionary</span><span style="color:#f92672">&lt;</span>KeyType, ObjectType<span style="color:#f92672">&gt;</span>(NSKeyValueCoding)

<span style="color:#66d9ef">@interface</span> <span style="color:#a6e22e">NSMutableDictionary</span><span style="color:#f92672">&lt;</span>KeyType, ObjectType<span style="color:#f92672">&gt;</span>(NSKeyValueCoding)

<span style="color:#66d9ef">@interface</span> <span style="color:#a6e22e">NSOrderedSet</span><span style="color:#f92672">&lt;</span>ObjectType<span style="color:#f92672">&gt;</span>(NSKeyValueCoding)

<span style="color:#66d9ef">@interface</span> <span style="color:#a6e22e">NSSet</span><span style="color:#f92672">&lt;</span>ObjectType<span style="color:#f92672">&gt;</span>(NSKeyValueCoding)

</code></pre></div><p>下面是一些主要的方法：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec">
- (nullable <span style="color:#66d9ef">id</span>)<span style="color:#a6e22e">valueForKey:</span>(NSString <span style="color:#f92672">*</span>)key;

- (<span style="color:#66d9ef">void</span>)<span style="color:#a6e22e">setValue:</span>(nullable <span style="color:#66d9ef">id</span>)value <span style="color:#a6e22e">forKey:</span>(NSString <span style="color:#f92672">*</span>)key;

- (nullable <span style="color:#66d9ef">id</span>)<span style="color:#a6e22e">valueForKeyPath:</span>(NSString <span style="color:#f92672">*</span>)keyPath;
  
- (<span style="color:#66d9ef">void</span>)<span style="color:#a6e22e">setValue:</span>(nullable <span style="color:#66d9ef">id</span>)value <span style="color:#a6e22e">forKeyPath:</span>(NSString <span style="color:#f92672">*</span>)keyPath;

- (nullable <span style="color:#66d9ef">id</span>)<span style="color:#a6e22e">valueForUndefinedKey:</span>(NSString <span style="color:#f92672">*</span>)key;

- (<span style="color:#66d9ef">void</span>)<span style="color:#a6e22e">setValue:</span>(nullable <span style="color:#66d9ef">id</span>)value <span style="color:#a6e22e">forUndefinedKey:</span>(NSString <span style="color:#f92672">*</span>)key;

</code></pre></div><p>实践是检验真理的唯一标准，下面创建一个工程实践一下</p>
<ol>
<li>Xcode -&gt; New -&gt; MacOS -&gt; CommandLine</li>
<li>创建Person类</li>
</ol>
<p>关于KVC要分为两部分，集合类型与非集合类型，下面先来看<strong>非集合类型</strong></p>
<p>Person.h</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec"><span style="color:#75715e">#import &lt;Foundation/Foundation.h&gt;
</span><span style="color:#75715e"></span>
NS_ASSUME_NONNULL_BEGIN

<span style="color:#66d9ef">@interface</span> <span style="color:#a6e22e">Person</span> : <span style="color:#a6e22e">NSObject</span>

<span style="color:#66d9ef">@property</span> (<span style="color:#66d9ef">nonatomic</span> ,<span style="color:#66d9ef">copy</span>) NSString <span style="color:#f92672">*</span>name;

<span style="color:#66d9ef">@property</span> (<span style="color:#66d9ef">nonatomic</span> ,<span style="color:#66d9ef">assign</span>) NSUInteger age;

<span style="color:#66d9ef">@property</span> (<span style="color:#66d9ef">nonatomic</span> ,<span style="color:#66d9ef">copy</span>) NSArray<span style="color:#f92672">&lt;</span>Person <span style="color:#f92672">*&gt;</span> <span style="color:#f92672">*</span>friends;

<span style="color:#66d9ef">@end</span>

NS_ASSUME_NONNULL_END

</code></pre></div><p>Person.m</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec"><span style="color:#75715e">#import &#34;Person.h&#34;
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">@implementation</span> <span style="color:#a6e22e">Person</span>

- (<span style="color:#66d9ef">instancetype</span>)<span style="color:#a6e22e">init</span> {
    
    self <span style="color:#f92672">=</span> [super init];
    <span style="color:#66d9ef">if</span> (self) {
        _name <span style="color:#f92672">=</span> <span style="color:#e6db74">@&#34;&#34;</span>;
        _age <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
        _friends <span style="color:#f92672">=</span> <span style="color:#ae81ff">@[]</span>;
    }
    <span style="color:#66d9ef">return</span> self;
}

<span style="color:#75715e">// 重写以便打印对象的属性
</span><span style="color:#75715e"></span>- (NSString <span style="color:#f92672">*</span>)<span style="color:#a6e22e">description</span> {
    
    <span style="color:#66d9ef">return</span> [NSString stringWithFormat:<span style="color:#e6db74">@&#34;- name: %@, age: %ld, friends: %@&#34;</span>,self.name, self.age, self.friends];
}

<span style="color:#66d9ef">@end</span>
</code></pre></div><p>打开main.m，创建两个Person的实例Alice和Bob</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec"><span style="color:#75715e">#import &lt;Foundation/Foundation.h&gt;
</span><span style="color:#75715e">#import &#34;Person.h&#34;
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>(<span style="color:#66d9ef">int</span> argc, <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">char</span> <span style="color:#f92672">*</span> argv[]) {
    <span style="color:#66d9ef">@autoreleasepool</span> {
        
        Person <span style="color:#f92672">*</span>Alice <span style="color:#f92672">=</span> Person.new;
        Alice.name <span style="color:#f92672">=</span> <span style="color:#e6db74">@&#34;Alice&#34;</span>;
        Alice.age <span style="color:#f92672">=</span> <span style="color:#ae81ff">18</span>;
        Alice.friends <span style="color:#f92672">=</span> <span style="color:#ae81ff">@[]</span>;
        
        Person <span style="color:#f92672">*</span>Bob <span style="color:#f92672">=</span> Person.new;
        [Bob setValue:<span style="color:#e6db74">@&#34;Bob&#34;</span> forKey:<span style="color:#e6db74">@&#34;name&#34;</span>];
        [Bob setValue:<span style="color:#ae81ff">@(</span><span style="color:#ae81ff">28</span><span style="color:#ae81ff">)</span> forKey:<span style="color:#e6db74">@&#34;age&#34;</span>];
        [Bob setValue:<span style="color:#ae81ff">@[</span>Alice<span style="color:#ae81ff">]</span> forKey:<span style="color:#e6db74">@&#34;friends&#34;</span>];
        
        NSLog(<span style="color:#e6db74">@&#34;%@&#34;</span>,<span style="color:#ae81ff">@[</span>Alice,Bob<span style="color:#ae81ff">]</span>);
        NSLog(<span style="color:#e6db74">@&#34;%@&#34;</span>,[Bob valueForKeyPath:<span style="color:#e6db74">@&#34;friends&#34;</span>]);
    }
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}

</code></pre></div><p>其中，ALice 使用正常的 set 方法进行赋值，Bob使用<code>KVC</code>方式赋值，
<code>Command</code> + R，能够看到如下输出</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec">(
    <span style="color:#e6db74">&#34;- name: Alice, age: 18, friends: (</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">)&#34;</span>,
    <span style="color:#e6db74">&#34;- name: Bob, age: 28, friends: (</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">    </span><span style="color:#ae81ff">\&#34;</span><span style="color:#e6db74">- name: Alice, age: 18, friends: (</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">n)</span><span style="color:#ae81ff">\&#34;\n</span><span style="color:#e6db74">)&#34;</span>
)

(
    <span style="color:#e6db74">&#34;- name: Alice, age: 18, friends: (</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">)&#34;</span>
)
</code></pre></div><p>输出正如我们想的那样，通过KVC，正确的对Bob的name，age，friends进行了赋值和取值操作</p>
<p>那么若果想直接获取Bob名字的长度呢</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec"><span style="color:#66d9ef">id</span> nameLength <span style="color:#f92672">=</span> [Bob valueForKeyPath:<span style="color:#e6db74">@&#34;name.length&#34;</span>];
</code></pre></div><p>有没有发现这种方式很便捷呢，后面还有更有趣的用法。</p>
<p>接下来想一个问题，如果我想使用KVC进行赋值但是相应的类并没有对应的属性怎么办</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec">[Bob setValue:<span style="color:#e6db74">@&#34;Bob&#34;</span> forKey:<span style="color:#e6db74">@&#34;familyName&#34;</span>];
</code></pre></div><p>运行就会崩溃掉，而在生产环境的情况下我们可不想让App Crash，
可以看下报错信息</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec"> Terminating app due to uncaught exception <span style="color:#960050;background-color:#1e0010">&#39;</span>NSUnknownKeyException<span style="color:#960050;background-color:#1e0010">&#39;</span>, reason: <span style="color:#960050;background-color:#1e0010">&#39;</span>[<span style="color:#f92672">&lt;</span>Person <span style="color:#ae81ff">0x1030063b0</span><span style="color:#f92672">&gt;</span> setValue:forUndefinedKey:]<span style="color:#f92672">:</span> this <span style="color:#66d9ef">class</span> is not key value coding<span style="color:#f92672">-</span>compliant <span style="color:#66d9ef">for</span> the key familyName.<span style="color:#960050;background-color:#1e0010">&#39;</span>
</code></pre></div><p>可以发现导致崩溃的原因是Person类没有实现这个方法 setValue:forUndefinedKey:
接下来在Person.m里面添加这个方法的实现</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec">- (<span style="color:#66d9ef">void</span>)<span style="color:#a6e22e">setValue:</span>(<span style="color:#66d9ef">id</span>)value <span style="color:#a6e22e">forUndefinedKey:</span>(NSString <span style="color:#f92672">*</span>)key {
    
}
</code></pre></div><p>可以看到运行之后不会崩溃了</p>
<p>上面简单介绍了一下非集合类型，下面先来看<strong>集合类型</strong></p>
<p>首先new一个Array</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec">NSArray <span style="color:#f92672">*</span>family <span style="color:#f92672">=</span> <span style="color:#ae81ff">@[</span>Alice,Bob<span style="color:#ae81ff">]</span>;
NSLog(<span style="color:#e6db74">@&#34;%@&#34;</span>,[family valueForKey:<span style="color:#e6db74">@&#34;count&#34;</span>]);
</code></pre></div><p>运行后发现又又又crash了，</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec"><span style="color:#f92672">***</span> Terminating app due to uncaught exception <span style="color:#960050;background-color:#1e0010">&#39;</span>NSUnknownKeyException<span style="color:#960050;background-color:#1e0010">&#39;</span>, reason: <span style="color:#960050;background-color:#1e0010">&#39;</span>[<span style="color:#f92672">&lt;</span>Person <span style="color:#ae81ff">0x100703db0</span><span style="color:#f92672">&gt;</span> valueForUndefinedKey:]<span style="color:#f92672">:</span> this <span style="color:#66d9ef">class</span> is not key value coding<span style="color:#f92672">-</span>compliant <span style="color:#66d9ef">for</span> the key count.<span style="color:#960050;background-color:#1e0010">&#39;</span>
</code></pre></div><p>按照正常的理解，我们无非是想回去Array的count属性，为什么会崩溃呢，原来对集合类型进行KVC操作时是分别对集合内对象进行操作，</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec">NSLog(<span style="color:#e6db74">@&#34;%@&#34;</span>,[family valueForKey:<span style="color:#e6db74">@&#34;name&#34;</span>]);
</code></pre></div><p>现在的输出是一个Array</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec">(
    Alice,
    Bob
)
</code></pre></div><p>使用KVC对集合类型内部对象赋值也是一样的</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec">NSArray <span style="color:#f92672">*</span>family <span style="color:#f92672">=</span> <span style="color:#ae81ff">@[</span>Alice,Bob<span style="color:#ae81ff">]</span>;
[family setValue:<span style="color:#e6db74">@&#34;NoName&#34;</span> forKey:<span style="color:#e6db74">@&#34;name&#34;</span>];
NSLog(<span style="color:#e6db74">@&#34;%@&#34;</span>,family);
</code></pre></div><p>当然，你也可以自己重写上述的方法来使用，这里就不多赘述。</p>
<p>下面来还有一些更有趣的</p>
<h3 id="kvc集合操作符">KVC集合操作符</h3>
<p><img src="https://raw.githubusercontent.com/FelixScat/Pub/master/image/keypath.jpg" alt="keypath"></p>
<p>可以看到对于集合操作，在keypath中间我们可以加入一个集合操作符，能够实现更为便捷的骚操作</p>
<p>集合操作符有一下几种</p>
<ul>
<li>@avg   // 算数平均值</li>
<li>@count // 计数</li>
<li>@max   // 最大值</li>
<li>@min   // 最小值</li>
<li>@sum   // 求和</li>
<li>@unionOfObjects // 创建并返回一个数组，该数组包含与右键路径指定的属性对应的集合的所有对象。</li>
<li>@distinctUnionOfObjects // 同unionOfObjects，但会对数组去重</li>
<li>@unionOfArrays // 创建并返回一个数组，该数组包含与右键路径指定的属性对应的所有集合的组合的对象。</li>
<li>@distinctUnionOfArrays // 同unionOfArrays，但会对数组去重</li>
</ul>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec">NSLog(<span style="color:#e6db74">@&#34;%@&#34;</span>,[family valueForKeyPath:<span style="color:#e6db74">@&#34;@max.age&#34;</span>]);
NSLog(<span style="color:#e6db74">@&#34;%@&#34;</span>,[family valueForKeyPath:<span style="color:#e6db74">@&#34;@min.age&#34;</span>]);
NSLog(<span style="color:#e6db74">@&#34;%@&#34;</span>,[family valueForKeyPath:<span style="color:#e6db74">@&#34;@sum.age&#34;</span>]);
NSLog(<span style="color:#e6db74">@&#34;%@&#34;</span>,[family valueForKeyPath:<span style="color:#e6db74">@&#34;@avg.age&#34;</span>]);
</code></pre></div><p>这里可以看到获取到了Alice和Bob年龄的最大值，最小值，和，平均值</p>
<p>还有一种特殊场景，就是我想获取这个family的所有friends怎么做呢</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec">NSLog(<span style="color:#e6db74">@&#34;%@&#34;</span>,[family valueForKeyPath:<span style="color:#e6db74">@&#34;@unionOfObjects.friends&#34;</span>]);

(
        (
    ),
        (
        <span style="color:#e6db74">&#34;- name: Alice, age: 18, friends: (</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">)&#34;</span>
    )
)
</code></pre></div><p>可以看到打印似乎有些不对劲，我们想要的是所有的friends，但数组中却是Alice的friends，Bob的friends两个对象。
这时候我们可以使用unionOfArrays，这个操作符会帮我们将数组元素【铺平】</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec">NSLog(<span style="color:#e6db74">@&#34;%@&#34;</span>,[family valueForKeyPath:<span style="color:#e6db74">@&#34;@unionOfArrays.friends&#34;</span>]);
</code></pre></div><p>一句代码即展开获取了你所需要的Array，否则你只能写一些胶水代码</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-objectivec" data-lang="objectivec">NSArray <span style="color:#f92672">*</span>arr <span style="color:#f92672">=</span> [Alice.friends arrayByAddingObjectsFromArray:Bob.friends];
</code></pre></div><p>不够优雅</p>
<p>基本的KVC就介绍这么多，如果有更深层次的自定义实现需求的话还是推荐多看看Apple的文档，不过记得使用KVC的话当对象更新了property不要忘记更新keypath</p>

</div>


        
<div class="section bottom-menu">
    
<hr />
<p>


    
        <a href="http://example.org/posts">back</a>
        
            &#183;
        
    

    
        
            <a href="http://example.org/posts">posts</a>
        
    
    
        
            &#183; 
            <a href="http://example.org/memoryManage">memoryManage</a>
        
            &#183; 
            <a href="http://example.org/portfolio">portfolio</a>
        
            &#183; 
            <a href="http://example.org/about">who is Cb7d?</a>
        
    
    &#183; 
    <a href="http://example.org/">
        main
    </a>

</p>
</div>


        <div class="section footer">Cb7d &lsquo;s blog.</div>
    </div>
</body>

</html>